# 新书速递功能产品需求文档 (PRD)

## 文档信息

| 项目 | 内容 |
|------|------|
| 产品名称 | BookRank3 - 新书速递 |
| 文档版本 | v1.0 |
| 创建日期 | 2026-02-25 |
| 文档状态 | 待评审 |

---

## 1. 功能概述

### 1.1 背景

BookRank3 是一个外文图书销售辅助平台，目前已有畅销书榜单展示、获奖图书展示、图书翻译等功能。为了帮助用户及时了解各大出版社的最新出版物，需要新增"新书速递"功能模块。

### 1.2 目标

- 为用户提供各大出版社新书信息的集中展示平台
- 支持多维度筛选和搜索，帮助用户快速找到目标图书
- 提供数据导出功能，支持业务分析和选品决策
- 与现有功能模块保持一致的用户体验

### 1.3 目标用户

| 用户类型 | 描述 | 核心需求 |
|----------|------|----------|
| 图书采购人员 | 书店、图书馆采购专员 | 快速了解新书动态，筛选目标图书，导出采购清单 |
| 图书编辑 | 出版社编辑人员 | 关注竞品动态，了解市场趋势 |
| 书评人/博主 | 图书评论内容创作者 | 发现新书选题，获取图书详细信息 |
| 普通读者 | 对外文图书感兴趣的读者 | 了解新书资讯，发现感兴趣的新书 |

---

## 2. 功能需求

### 2.1 功能架构

```
新书速递
├── 筛选栏
│   ├── 出版社筛选
│   ├── 类别筛选
│   ├── 时间范围筛选
│   └── 关键词搜索
├── 工具栏
│   ├── 导出Excel
│   ├── 导出PDF
│   └── 同步新书
├── 图书展示
│   ├── 卡片视图
│   ├── 列表视图
│   └── 图书详情弹窗
└── 分页组件
```

### 2.2 功能详情

#### 2.2.1 筛选栏

| 筛选项 | 类型 | 说明 | 默认值 |
|--------|------|------|--------|
| 出版社筛选 | 下拉多选 | 支持多选出版社，显示已选数量 | 全部 |
| 类别筛选 | 下拉单选 | 按图书类别筛选 | 全部类别 |
| 时间范围筛选 | 日期选择器 | 选择出版日期范围 | 近30天 |
| 关键词搜索 | 输入框 | 支持书名、作者、ISBN搜索 | 空 |

**交互说明：**
- 筛选条件变更后自动触发搜索（防抖处理，延迟300ms）
- 搜索框支持回车键触发搜索
- 提供重置按钮，一键清空所有筛选条件

#### 2.2.2 工具栏

| 功能 | 说明 | 权限 |
|------|------|------|
| 导出Excel | 导出当前筛选结果为Excel文件 | 所有用户 |
| 导出PDF | 导出当前筛选结果为PDF文件 | 所有用户 |
| 同步新书 | 从数据源拉取最新新书数据 | 管理员 |

**交互说明：**
- 导出时显示加载提示
- 导出完成后显示成功提示
- 同步功能需要管理员权限，普通用户不显示此按钮

#### 2.2.3 图书卡片展示

**卡片信息：**
- 封面图片（支持懒加载，加载失败显示默认封面）
- 书名（中英文双语显示）
- 作者
- 出版社
- 价格（原价/折扣价）
- 出版日期
- 类别标签
- 详情按钮

**交互说明：**
- 鼠标悬停卡片时显示阴影效果和轻微上浮动画
- 点击卡片或详情按钮打开详情弹窗
- 支持网格视图和列表视图切换
- 响应式布局适配不同屏幕尺寸

#### 2.2.4 图书详情弹窗

**展示信息：**
- 封面图片（大图）
- 书名（中英文）
- 作者
- 出版社
- 出版日期
- ISBN
- 价格
- 类别
- 图书简介
- 购买链接（如有）

**交互说明：**
- 点击遮罩层或关闭按钮关闭弹窗
- 支持ESC键关闭
- 弹窗打开时禁止页面滚动

#### 2.2.5 分页功能

| 参数 | 说明 | 默认值 |
|------|------|--------|
| 每页条数 | 可选10/20/50条 | 20条 |
| 总页数显示 | 显示总页数和总条数 | - |
| 页码跳转 | 支持输入页码跳转 | - |

---

## 3. 数据字段

### 3.1 新书数据模型

| 字段名 | 字段类型 | 必填 | 说明 |
|--------|----------|------|------|
| id | Integer | 是 | 主键ID |
| title_cn | String(500) | 否 | 中文书名 |
| title_en | String(500) | 是 | 英文原书名 |
| author | String(200) | 是 | 作者 |
| publisher | String(200) | 是 | 出版社 |
| publish_date | Date | 是 | 出版日期 |
| isbn | String(20) | 是 | ISBN编号 |
| price | Decimal(10,2) | 否 | 价格（美元） |
| category | String(100) | 否 | 图书类别 |
| cover_url | String(500) | 否 | 封面图片URL |
| description | Text | 否 | 图书简介 |
| source | String(100) | 否 | 数据来源 |
| created_at | DateTime | 是 | 创建时间 |
| updated_at | DateTime | 是 | 更新时间 |

### 3.2 出版社数据

预设主要合作出版社列表：

| 出版社代码 | 出版社名称 | 国家/地区 |
|------------|------------|-----------|
| PRH | Penguin Random House | 美国 |
| HC | HarperCollins | 美国 |
| S&S | Simon & Schuster | 美国 |
| HBG | Hachette Book Group | 美国 |
| MP | Macmillan Publishers | 英国 |
| OUP | Oxford University Press | 英国 |
| CUP | Cambridge University Press | 英国 |

### 3.3 类别数据

| 类别代码 | 类别名称 |
|----------|----------|
| fiction | 虚构类 |
| nonfiction | 非虚构类 |
| mystery | 悬疑/推理 |
| romance | 言情 |
| scifi | 科幻 |
| biography | 传记 |
| history | 历史 |
| science | 科学 |
| business | 商业 |
| selfhelp | 自我提升 |
| children | 儿童读物 |
| other | 其他 |

---

## 4. 界面设计

### 4.1 页面布局

```
+--------------------------------------------------+
|                    顶部导航栏                      |
+--------------------------------------------------+
|  侧边栏  |              主内容区                    |
|          |  +-----------------------------------+ |
|  导航菜单 |  |          页面标题                   | |
|          |  +-----------------------------------+ |
|  畅销书榜 |  |          筛选栏                     | |
|  获奖书单 |  +-----------------------------------+ |
|  新书速递 |  |          工具栏                     | |
|          |  +-----------------------------------+ |
|  关于    |  |          图书卡片网格               | |
|          |  |                                    | |
|          |  +-----------------------------------+ |
|          |  |          分页组件                   | |
|          |  +-----------------------------------+ |
+--------------------------------------------------+
```

### 4.2 响应式断点

| 断点名称 | 屏幕宽度 | 布局调整 |
|----------|----------|----------|
| 桌面端 | >= 1024px | 侧边栏固定显示，卡片4列 |
| 平板端 | 768px - 1023px | 侧边栏隐藏，卡片3列 |
| 手机端 | < 768px | 侧边栏隐藏，卡片2列或单列 |

### 4.3 深色模式

- 支持系统级深色模式自动切换
- 支持手动切换明暗主题
- 深色模式下使用深色背景和浅色文字
- 保持品牌色一致性

---

## 5. 技术要求

### 5.1 前端技术

| 技术 | 版本 | 用途 |
|------|------|------|
| HTML5 | - | 页面结构 |
| CSS3 | - | 样式设计 |
| JavaScript | ES2020+ | 交互逻辑 |
| Font Awesome | 6.5.1 | 图标库 |

### 5.2 后端接口

#### 5.2.1 获取新书列表

```
GET /api/new-books

请求参数：
- page: 页码（默认1）
- per_page: 每页条数（默认20）
- publisher: 出版社代码（可选，多选用逗号分隔）
- category: 类别代码（可选）
- start_date: 开始日期（可选，格式YYYY-MM-DD）
- end_date: 结束日期（可选，格式YYYY-MM-DD）
- keyword: 搜索关键词（可选）

响应示例：
{
    "success": true,
    "data": {
        "books": [...],
        "total": 100,
        "page": 1,
        "per_page": 20,
        "total_pages": 5
    }
}
```

#### 5.2.2 获取图书详情

```
GET /api/new-books/{id}

响应示例：
{
    "success": true,
    "data": {
        "id": 1,
        "title_cn": "...",
        "title_en": "...",
        ...
    }
}
```

#### 5.2.3 导出数据

```
GET /api/new-books/export

请求参数：
- format: 导出格式（excel/pdf）
- 其他筛选参数同列表接口

响应：
- Excel: 返回.xlsx文件下载
- PDF: 返回.pdf文件下载
```

#### 5.2.4 同步新书数据

```
POST /api/new-books/sync

请求头：
- Authorization: Bearer {token}

响应示例：
{
    "success": true,
    "data": {
        "added": 50,
        "updated": 20,
        "total": 70
    }
}
```

### 5.3 性能要求

| 指标 | 目标值 |
|------|--------|
| 首屏加载时间 | < 2秒 |
| 列表加载时间 | < 1秒 |
| 图片懒加载 | 支持 |
| 分页响应时间 | < 500ms |

---

## 6. 验收标准

### 6.1 功能验收

| 编号 | 验收项 | 验收标准 |
|------|--------|----------|
| F01 | 出版社筛选 | 可选择单个或多个出版社，筛选结果正确 |
| F02 | 类别筛选 | 可选择类别，筛选结果正确 |
| F03 | 时间范围筛选 | 可选择日期范围，筛选结果正确 |
| F04 | 关键词搜索 | 支持书名、作者、ISBN搜索，结果正确 |
| F05 | 筛选重置 | 点击重置按钮清空所有筛选条件 |
| F06 | 视图切换 | 可切换网格/列表视图，状态保持 |
| F07 | 图书详情 | 点击卡片显示详情弹窗，信息完整 |
| F08 | 分页功能 | 分页导航正确，可跳转指定页码 |
| F09 | 导出Excel | 可导出Excel文件，数据完整 |
| F10 | 导出PDF | 可导出PDF文件，格式正确 |
| F11 | 同步新书 | 管理员可触发同步，结果正确 |
| F12 | 深色模式 | 支持明暗主题切换，样式正确 |

### 6.2 界面验收

| 编号 | 验收项 | 验收标准 |
|------|--------|----------|
| UI01 | 响应式布局 | 在不同屏幕尺寸下布局正确 |
| UI02 | 卡片样式 | 卡片样式与现有页面风格一致 |
| UI03 | 动画效果 | 悬停、点击等交互动画流畅 |
| UI04 | 加载状态 | 显示加载动画，体验流畅 |
| UI05 | 空状态 | 无数据时显示友好提示 |
| UI06 | 错误处理 | 错误时显示友好提示信息 |

### 6.3 兼容性验收

| 编号 | 验收项 | 验收标准 |
|------|--------|----------|
| C01 | Chrome | 最新版本功能正常 |
| C02 | Firefox | 最新版本功能正常 |
| C03 | Safari | 最新版本功能正常 |
| C04 | Edge | 最新版本功能正常 |
| C05 | 移动端浏览器 | iOS Safari、Android Chrome功能正常 |

---

## 7. 项目排期

| 阶段 | 任务 | 预计工时 |
|------|------|----------|
| 设计阶段 | UI设计稿确认 | 2天 |
| 开发阶段 | 前端页面开发 | 3天 |
| 开发阶段 | 后端接口开发 | 2天 |
| 开发阶段 | 数据同步功能 | 2天 |
| 测试阶段 | 功能测试 | 2天 |
| 上线阶段 | 部署上线 | 1天 |

**总计：12个工作日**

---

## 8. 风险评估

| 风险项 | 风险等级 | 应对措施 |
|--------|----------|----------|
| 数据源不稳定 | 中 | 建立数据缓存机制，支持手动同步 |
| 封面图片加载慢 | 低 | 使用CDN加速，实现懒加载 |
| 导出文件过大 | 低 | 限制单次导出数量，分批导出 |
| 搜索性能问题 | 中 | 建立索引，优化查询语句 |

---

## 9. 附录

### 9.1 术语表

| 术语 | 说明 |
|------|------|
| PRD | 产品需求文档 (Product Requirements Document) |
| ISBN | 国际标准书号 (International Standard Book Number) |
| CDN | 内容分发网络 (Content Delivery Network) |

### 9.2 参考文档

- [BookRank3 项目规范](../.trae/rules/project_rules.md)
- [第一阶段PRD](./第一阶段PRD.md)
- [第二阶段PRD](./第二阶段PRD.md)

---

**文档结束**
